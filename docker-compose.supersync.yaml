# Docker Compose override for SuperSync E2E tests
# Uses port 1901 so tests can run while dev server uses 1900
# Usage: docker compose -f docker-compose.yaml -f docker-compose.supersync.yaml up -d supersync
services:
  supersync:
    ports: !override
      - '1901:1900'
    environment:
      - NODE_ENV=development
      - PORT=1900
      - TEST_MODE=true
      - TEST_MODE_CONFIRM=yes-i-understand-the-risks
      - JWT_SECRET=e2e-test-secret-minimum-32-chars-long-for-security
      - CORS_ORIGINS=*
      - DATA_DIR=/data
      - DATABASE_URL=postgresql://supersync:superpassword@db:5432/supersync_db
      - WEBAUTHN_ORIGIN=http://localhost:1901
      - PUBLIC_URL=http://localhost:1901
